import{c as b,B as $}from"./_commonjsHelpers-1976dd24.js";var A="Expected a function",I=0/0,G="[object Symbol]",P=/^\s+|\s+$/g,U=/^[-+]0x[0-9a-f]+$/i,J=/^0b[01]+$/i,K=/^0o[0-7]+$/i,X=parseInt,Y=typeof b=="object"&&b&&b.Object===Object&&b,z=typeof self=="object"&&self&&self.Object===Object&&self,Q=Y||z||Function("return this")(),V=Object.prototype,Z=V.toString,ee=Math.max,te=Math.min,C=function(){return Q.Date.now()};function ne(e,t,n){var o,i,d,c,s,l,u=0,j=!1,f=!1,L=!0;if(typeof e!="function")throw new TypeError(A);t=O(t)||0,h(n)&&(j=!!n.leading,f="maxWait"in n,d=f?ee(O(n.maxWait)||0,t):d,L="trailing"in n?!!n.trailing:L);function v(r){var a=o,g=i;return o=i=void 0,u=r,c=e.apply(g,a),c}function D(r){return u=r,s=setTimeout(y,t),j?v(r):c}function W(r){var a=r-l,g=r-u,M=t-a;return f?te(M,d-g):M}function x(r){var a=r-l,g=r-u;return l===void 0||a>=t||a<0||f&&g>=d}function y(){var r=C();if(x(r))return w(r);s=setTimeout(y,W(r))}function w(r){return s=void 0,L&&o?v(r):(o=i=void 0,c)}function _(){s!==void 0&&clearTimeout(s),u=0,o=l=i=s=void 0}function R(){return s===void 0?c:w(C())}function T(){var r=C(),a=x(r);if(o=arguments,i=this,l=r,a){if(s===void 0)return D(l);if(f)return s=setTimeout(y,t),v(l)}return s===void 0&&(s=setTimeout(y,t)),c}return T.cancel=_,T.flush=R,T}function oe(e,t,n){var o=!0,i=!0;if(typeof e!="function")throw new TypeError(A);return h(n)&&(o="leading"in n?!!n.leading:o,i="trailing"in n?!!n.trailing:i),ne(e,t,{leading:o,maxWait:t,trailing:i})}function h(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function re(e){return!!e&&typeof e=="object"}function ie(e){return typeof e=="symbol"||re(e)&&Z.call(e)==G}function O(e){if(typeof e=="number")return e;if(ie(e))return I;if(h(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=h(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(P,"");var n=J.test(e);return n||K.test(e)?X(e.slice(2),n?2:8):U.test(e)?I:+e}var se=oe;const F=new $,S=document.querySelector(".category-wrapper");N();function N(){try{F.getTopBooks().then(e=>{ce(),ae(e)})}catch(e){console.log(e)}}function ce(){S.insertAdjacentHTML("beforeend",'<h1 class = "main-title">Best Sellers <span class = "main-title-span">Books</span></h1>')}function ae(e){e.map(({list_name:t,books:n})=>{const o=le(n);ue(t,o)}).join("")}function le(e){return e.length>0?e.map(({book_image:t,title:n,author:o,_id:i})=>q(t,n,o,i)).join(""):de()}function de(){return`<li class = "cork">
            <div class="cork-wraper-svg">
            <svg width="88" height="80">
              <use class="cork-use" href="./img/icons.svg#icon-cork-book"></use>
            </svg>
            <p class = "cork-text">Sorry, the book will be added later...</p>
            </div>
        </li>`}function ue(e,t){const n=`<div class = "wrapper-for-genre">
                          <h2 class = "list-name">${e}</h2>
                          <ul class="category-list">${t}</ul>
                          <button class="button" type="button">See More</button>
                        </div>`;S.insertAdjacentHTML("beforeend",n),document.querySelector(".wrapper-for-genre");const o=document.querySelector(".button");t.includes('<li class = "cork">')&&o.classList.add("is-hidden")}S.addEventListener("click",se(fe,1e3));function fe(e){if(e.target.nodeName==="BUTTON"){const t=e.target.parentNode.firstElementChild.textContent,n=e.target.previousElementSibling,o=n.children;if(e.target.textContent==="See More")n.innerHTML="",ge(t,n),e.target.textContent="See Less";else for(let i=0;i<o.length;i++)i>4&&(o[i].classList="items-is-hidden",e.target.textContent="See More",be())}}function ge(e,t){try{F.getBookByCategory(e).then(n=>{me(n,t)})}catch(n){console.log(n)}}function me(e,t){e.map(({book_image:n,title:o,author:i,_id:d})=>{const c=q(n,o,i,d);t.insertAdjacentHTML("beforeend",c)}).join("")}function q(e,t,n,o){return`<li class = "wrapper">
              <a href="#" class="link" id="${o}">
                <img class="img" src="${e}">
                <h3 class = "book-title">${t}</h3>
                <p class = "book-author">${n}</p>
              </a>
          </li>`}const B=document.getElementById("btn-to-top");B.addEventListener("click",ye);window.onscroll=function(){pe()};function pe(){document.body.scrollTop>300||document.documentElement.scrollTop>300?B.style.display="block":B.style.display="none"}function ye(){document.body.scrollTop=0,document.documentElement.scrollTop=0}function be(){document.body.scrollTop=0,document.documentElement.scrollTop=0}const ke=document.querySelector(".categories-elements"),H=document.querySelector(".categories-elements");let m=document.getElementsByClassName("categories-list");const E=new $;function he(e){for(let t=0;t<e.length;t++)e[t].classList.remove("active")}function Le(){E.getCategoryList().then(e=>{const t=e.map(({list_name:n})=>`<li class="categories-list" id=${n}><a class="category-link" href="#">${n}</a></li>`).sort().join("");console.log(e),ke.insertAdjacentHTML("beforeend",t);for(let n=0;n<m.length;n++)m[n].addEventListener("click",o=>{console.log(m[n]),he(m),m[n].classList.add("active")})}).catch(e=>console.log(e))}Le();H.addEventListener("click",ve);async function ve(e){if(console.log(e.target.textContent),!(e.target.nodeName!=="LI"&&e.target.textContent==="All categories"))try{const t=await E.getBookByCategory(e.target.textContent)}catch(t){console.log(t)}}H.addEventListener("click",Te);async function Te(e){if(e.target.textContent==="All categories")try{const t=await E.getTopBooks();console.log(t);const n=N(t)}catch(t){console.log(t)}}const p={startBackdrop:document.querySelector(".start-backdrop"),startCloseBtn:document.querySelector(".start-close-btn"),form:document.querySelector(".start-form")},Ce="form-data";let k={};p.startCloseBtn.addEventListener("click",Be);p.form.addEventListener("submit",Se);window.addEventListener("keydown",Ee);function Be(){p.startBackdrop.classList.add("is-hidden"),document.body.classList.remove("scroll-lock")}function Se(e){e.preventDefault();const{name:t,email:n,password:o}=e.currentTarget.elements;k.name=t.value,k.email=n.value,k.password=o.value,localStorage.setItem(Ce,JSON.stringify(k)),e.currentTarget.reset(),p.startBackdrop.classList.add("is-hidden")}function Ee(e){e.code==="Escape"&&(p.startBackdrop.classList.add("is-hidden"),document.body.classList.remove("scroll-lock"),window.removeEventListener())}
